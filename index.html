<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Fishing Game</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

var config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    physics: {
        default: 'arcade',
        arcade: {
            gravity: { y: 0 },
            debug: false
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

    var game = new Phaser.Game(config);

    //Joueur principal
    var player;

    function preload ()
    {
        //Chargement des assets
        this.load.image('Maison', 'assets/Objects/Fishing_hut.png');
        this.load.image('fisherman', 'assets/Fisherman/Fisherman.png');
        this.load.image('Background', 'assets/Autres/background.png');
        this.load.image('Water', 'assets/Objects/Water_Simple.png');
        this.load.image('Water2', 'assets/Objects/Water_Simple_3.png');

        //Chargement des animations
        this.load.spritesheet('player_idle', 'assets/Fisherman/Fisherman_idle.png', { frameWidth: 48, frameHeight: 48 });
        this.load.spritesheet('player_fishing', 'assets/Fisherman/Fisherman_fish.png', { frameWidth: 48, frameHeight: 48 });
    }

    var waters;

    function create ()
    {
        //Création de l'arrière plan
        this.add.image(400, 300, 'Background');

        //Création de la maison
        this.add.image(100, 420, 'Maison');

        //Boucle pour afficher l'eau
        waters = this.physics.add.group({
            key: 'Water2',
            repeat: 3,
            setXY: { x: 5, y: 520, stepX: 260 }});
       

        //Ajout du joueur
        player = this.physics.add.sprite(190, 398, 'fisherman');

        //Création de l'animation d'idle du joueur
        this.anims.create({
            key: 'idle',
            frames: this.anims.generateFrameNumbers('player_idle', { start: 0, end: 3 }),
            frameRate: 6,
            repeat: -1
            });


    //console.log("your code");

    this.cursorKeys = this.input.keyboard.createCursorKeys();

    }

   

    function update ()
    {
        //Lance l'animation d'idle
        player.anims.play('idle', true);

        if(this.cursorKeys.space.isDown)
        {
            console.log("oui");
        }

       
    }

</script>

</body>
</html>